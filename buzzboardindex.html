<!DOCTYPE html>
<!--
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!DIGITAL BUZZBOARD!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
TITLE: Digital Buzzboard
AUTHOR: Mitchell Ungar
DATE: November 27 2015
VERSION: 2.0.0
This program uses "WebRTC" through javascript to connect two computers
through git pages and pubnub and allow two locations to see eachother through
webcam, and to see the birthdays and anniversary's of fellow employee's. It
Also shows the time and date.

How to run.
After pushing to the git repo type in
http://mitchellungar.github.io
NOTE:
it is not HTTPS it is HTTP.
Reason is that the security stops the camera stream.
NOTE:
When it comes to connecting to other computers it runs better
in firefox. With google chrome sometimes doesn't display camera
but will produce audio.
TODO


NOTE:
Resources:
buzzboardindex.html
editbuzzboardindex.html
excel.csv
index.html
read-csv.js
script.js
login.js
style.css
-->
<html>
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" type="image/x-ico" href="Pictures/icon.png" />`
    <title>Benefits By Design Buzzboard</title>
    <!--Lets you use jquery and avoid downloading NPM modules-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <!--Allows you to use pubnub resources such as .phone-->
    <script src="https://cdn.pubnub.com/pubnub.min.js"></script>
    <!--Lets you use simpleRTC to connect the two computers using ICE and turn servers-->
    <script src="http://kevingleason.me/SimpleRTC/js/webrtc.js"></script>
    <!--Used for the date and time functions-->
    <script type="text/javascript" src="js/script.js"></script>
    <!--Keeps all the DIV's in the right spot, as well as organizes the video area-->
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <script src="http://www.youtube.com/player_api"></script>
  </head>
  <body id="body">
<!--iiiiiiiiiiiiiiiiiiii TOP CONTAINER iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii-->
<div id="main-container">
    <div id="top-container">
      <!--BBD LOGO TOP LEFT-->
      <img src="Pictures/bbdLogo2.png" alt="BBDLogo" height="150" width="250" id="BBDLOGO">
      <!--Title of the page, TOP MIDDLE-->
      <!--<img alt="title" height="125" width="600" id="title">-->
      <div id="titleTop">
        <label id='titleLabel'>Inserting Title...</label>
      </div>
      <!--The Date top right corner-->
      <h1 id="dtField"></h1>
      <!--The Time, right below the date-->
      <h1 id="showTime"></h1>
    </div>
<!--iiiiiiiiiiiiiiiiiiiii MAIN CONTATINER iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii-->
    <!--Main div below top div-->

      <div id="left-container">
        <!--Birthdays and Anniversary's go here!!!!-->

      <!--  <img src="https://www.googledrive.com/host/0B4w5BGbJbfjBZU5XQzNLUGM5RjQ" height="200px" width ="200px" alt="whatever">-->

        <!--Login button and text box-->
        <!--<h2 class = "LoginFormTitle">Login
        <form name="loginForm" id="login" action="#" onsubmit="return login(this);">
            <input type="text" class="LoginForm" name="username" id="username" placeholder="Pick a username!" autocomplete="off" />
            <input type="submit" class="LoginForm" name="login_submit" value="Log In">
        </form>-->
        <!--Call button and text box
        Call
        <form name="callForm" id="call" action="#" onsubmit="return makeCall(this);">
            <input type="text" class="LoginForm" name="number" placeholder="Enter user to dial!" autocomplete="off" />
            <input type="submit" class="LoginForm" value="Call"/>
        </form></h2>-->

      </div>
<!--iiiiiiiiiiiiiiiiiiiii MIDDLE CONTAINER iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii-->
      <div id="mid-container">
        <!--Video Div for new video to be created in-->
        <div id="player"></div>

        <div id="vid-box"></div>

      </div>
<!--iiiiiiiiiiiiiiiiiiiii RIGHT CONTAINER iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii-->
      <div id="right-container">
        <h1 id="lrgTitle">Events</h1>
        <h2 class="eventTitle"></h2>
        <!--Lets you read the URL for variables-->
        <script type="text/javascript" src="js/read-csv.js"></script>
        <div id="csvDiv">
            <input type="file" id="csvFileInput" onchange="handleFiles(this.files)" accept=".csv">
        </div>

      </div>
    </body>
<!--iiiiiiiiiiiiiiiiiiiiii Javascript for WEB RTC iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii-->
    <script type="text/javascript">
      /*Creates new video object in vid-box container*/
      var video_out = document.getElementById("vid-box");
      /*Using pubnub to grab the publish key and the subscribe key*/
      function login(form) {
        var phone = window.phone = PHONE({
            number        : form.username.value || "Anonymous", // listen on username line else Anonymous
            publish_key   : 'pub-c-c0eba782-00c1-497f-afa4-d766b32d66af',
            subscribe_key : 'sub-c-cf519308-79b5-11e5-9720-0619f8945a4f',
        });
    /*If the connection works with the login text box goes green*/
        phone.ready(function(){ form.username.style.background="#55ff5b"; });
        phone.receive(function(session){
            session.connected(function(session) { video_out.appendChild(session.video); });
            session.ended(function(session) { video_out.innerHTML=''; });
        });
        return false;   // So the form does not submit.
    }
    /*Making a new call, if you are not logged in it will warn you*/
    function makeCall(form){
        if (!window.phone) alert("Login First!");
        else phone.dial(form.number.value);
        return false;
    }
    </script>

<!--iiiiiiiiiiiiiiiiiiiiii END iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii-->
</html>
